<%- include('../layouts/userheader') %>


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</head>
<style>
 /* Navbar Styles */
 .navbar {
      background-color: #343a40; /* Dark background */
      padding: 1rem 1rem; /* Padding */
  }

  .navbar-brand h1 {
      color: #ffffff; /* White text for the brand name */
      font-size: 2rem; /* Adjust as needed */
  }

  .navbar-nav .nav-item .nav-link {
      color: #ffffff; /* White text for nav links */
      margin-right: 1rem; /* Spacing between links */
  }

  .navbar-nav .nav-item .nav-link:hover {
      color: #ffc107; /* Yellow text on hover */
  }

  .navbar-nav .nav-item.active .nav-link {
      color: #ffc107; /* Yellow text for the active link */
  }

  .navbar-toggler {
      border-color: rgba(255, 255, 255, 0.1); /* Light border for toggler */
  }

  .navbar-toggler .navbar-toggler-icon {
      background-image: url("data:image/svg+xml;...");
  }

  /* Breadcrumb Section Styles */
  .breadcrumb-option {
      background: #f8f9fa; /* Light background */
      padding: 3.5rem 0; /* Padding */
      margin-bottom: 70px; /* Adjust the margin as needed */
  }

  .breadcrumb__text h4 {
      text-align: center; /* Center the text */
      margin: 0; /* Remove margin */
      font-size: 40px; /* Adjust as needed */
      color: #333333; /* Dark text color */
  }

  .breadcrumb__links {
      text-align: center; /* Center the breadcrumb links */
      font-size: 1rem; /* Adjust as needed */
      color: #777777; /* Light grey color */
  }

  /* Ensure breadcrumb links have some margin and are styled correctly */
  .breadcrumb__links a {
      color: #007bff; /* Primary color for links */
      text-decoration: none; /* Remove underline */
  }

  .breadcrumb__links a:hover {
      text-decoration: underline; /* Underline on hover */
  }

  .breadcrumb__links span {
      color: #333; /* Dark color for current page */
  }
 
.order-summary-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f9f9f9;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .order-summary h1, .order-summary h2, .order-summary h3 {
      color: #333;
  }
  .order-summary table {
      width: 100%;
      margin-top: 20px;
  }
  .order-summary th, .order-summary td {
      padding: 12px;
      text-align: left;
  }
  .order-summary th {
      background-color: #007bff;
      color: #fff;
  }
  .order-summary tbody tr:nth-child(even) {
      background-color: #f2f2f2;
  }
  .variant-image {
    width: 100px; /* Adjust the width as needed */
    height: auto; /* Maintain aspect ratio */
    max-width: 100%; /* Ensure the image does not overflow its container */
}
  .order-details {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
  }
  .address-details {
      max-width: 50%;
      text-align: right;
  }
  .order-summary-footer {
      margin-top: 20px;
      padding-top: 10px;
      border-top: 1px solid #dee2e6;
  }
  .order-summary-footer .row {
      margin-bottom: 10px;
}


.order-summary-label {
    color: rgb(69, 57, 57); /* Color for the 'strong' elements */
}

.order-summary-text {
    color: black; /* Color for the text after the 'strong' elements */
}

</style>
<body>
<!-- Navbar section -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container">
    <a class="navbar-brand" href="#"><h1 class="logoname">GAMZY</h1></a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="oi oi-menu"></span> Menu
    </button>

    <div class="collapse navbar-collapse" id="ftco-nav">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link" href="#" aria-haspopup="true" aria-expanded="false">Shop</a>
        </li>
        <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
        <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
        <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
        <li class="nav-item cta cta-colored"><a href="/user/productCart" class="nav-link"><span class="fas fa-shopping-cart"></span></a></li>
      </ul>
    </div>
  </div>
</nav>

<section class="breadcrumb-option">
  <div class="container">
      <div class="row">
          <div class="col-lg-12">
              <div class="breadcrumb__text">
                  <h4>Order Details</h4>
              </div>
          </div>
      </div>
  </div>
</section>

<div class="container order-summary-container">
    <div class="order-summary">
        <div class="order-details">
            <div class="order-info">
                <p><strong class="order-summary-label">Order ID:</strong> <span class="order-summary-text">#<%= order.orderId %></span></p>
                <p><strong class="order-summary-label">Total Amount:</strong> <span class="order-summary-text">₹<%= order.totalAmount.toFixed(2) %></span></p>
                <p><strong class="order-summary-label">Ordered Date:</strong> <span class="order-summary-text"><%= new Date(order.orderDate).toLocaleString() %></span></p>
            </div>
            <div class="address-details">
                <p><strong class="order-summary-label">Ship to:</strong> <span class="order-summary-text"><%= order.address.name %></span></p>
                <p><strong class="order-summary-label">Delivery Address:</strong><br>
                    <span class="order-summary-text">
                    <%= order.address.address %>, <br>
                    <%= order.address.Landmark %> <%= order.address.Landmark ? ', ' : '' %><%= order.address.street %><br>
                    <%= order.address.city %>, <%= order.address.state %> <%= order.address.pincode %><br>
                    +<%= order.address.number %>
                </span>
                </p>
            </div>
        </div>
        <h3 class="mt-4 mb-3">Products</h3>
        <table class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>Image</th>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <% order.products.forEach(product => { %>
                    <tr>
                        <% const variant = product.productId.variants.find(v => v._id.toString() === product.variantId.toString()); %>
                        <% if (variant && variant.images && variant.images.length > 0) { %>
                            <td><img src="/uploads/<%= variant.images[0] %>" alt="Product image" class="variant-image"></td>
                        <% } else { %>
                            <td><img src="/path/to/default/image.jpg" alt="Default Image" class="variant-image"></td>
                        <% } %>
                        <td>
                            <%= product.productId.productname %> <br>
                            <%= variant.color %> <br>
                          
                        </td>
                        <td><%= product.quantity %></td>
                        <td>₹<%= product.price.toFixed(2) %></td>
                        <td>₹<%= (product.price * product.quantity).toFixed(2) %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <div class="order-summary-footer">
            <div class="row align-items-center">
                <div class="col-md-6 text-left">
                    <a href="/user/ShopPage" class="btn btn-primary btn-lg mr-2 custom-btn">Continue Shopping</a>
                    <a href="/download-invoice/<%= order.orderId %>" class="btn btn-secondary btn-lg custom-btn">Download Invoice</a>
                </div>
                <div class="col-md-6 text-right">
                    <h6>Subtotal: <span>₹<%= order.products.reduce((sum, product) => sum + (product.price * product.quantity), 0).toFixed(2) %></span></h6>
                    <h6>Shipping Charge: <span>₹<%= order.shippingCharge.toFixed(2) %></span></h6>
                    <h3 class="mt-4">Grand Total: <span>₹<%= order.totalAmount.toFixed(2) %></span></h3>
                </div>
            </div>
        </div>
</div>


<script src="scripts.js"></script>

<%- include('../layouts/footer') %>
